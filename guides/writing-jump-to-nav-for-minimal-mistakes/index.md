---
title: Writing Jump To Nav for Minimal Mistakes
layout: single
sidebar:
  nav: writing-jump-to-nav-for-minimal-mistakes-nav
---

## Introduction

I'm hosting this website on GitHub pages and I'm using the [Minimal Mistakes Jekyll Theme](https://github.com/mmistakes/minimal-mistakes/). Since most of the content on this page will be short guides, I wanted to create a sidebar navigation on each guide which will allow the user to jump to any section of the guide.

## Set Up

I organized my guide files by placing them in a `guide/` folder. Each guide has its own folder where I would store an `index.md` and additional assets (such as images). This way, I am able to keep my files compartmentalized and  maintain clean URLs.

```
/guides/making-usc-class-checker/index.md
/guides/quick-python-from-cpp/index.md
...
```
## Side Bar Navigations

Unfortunately, the Minimal Mistakes theme supports an "inter-page" sidebar navigation menu and not an "intra-page" sidebar navigation menu. In other words, it is not directly possible to place the location hashes as navigation urls, only urls to other pages.

## Workaround

To workaround the navigation bar limitation, it is possible to hardcode the full URLs with the location hash of each section of each guide in `_data/navigation.yml` then add the appropriate YAML Front Matter in each guide.

`_data/navigation.yml`

```yaml
main:
  - title: "Guides"
    url: /guides/
  - title: "Contact"
    url: /contact/

making-usc-class-checker-nav:
  - title: "Jump to"
    children:
      - title: "Repository Page"
        url: "guides/making-usc-class-checker#repository-page"
      - title: "Introduction"
        url: "guides/making-usc-class-checker#introduction"
      - title: "Important Dependencies"
        url: "guides/making-usc-class-checker#important-dependencies"
```

`making-usc-class-checker/index.md`

```yaml
---
title: Making USC Class Checker
layout: single

sidebar:
  nav: "making-usc-class-checker-nav"
---
```

This isn't exactly ideal since I would have to manually add any new headings I make to to `_data/navigation.yml`. However, it gets the job done with minimal modification to the source code.

## Automating the Process

We can automate this process by writing a Python script to write `_data/navigation.yml` for us. The script below looks through my `guides` folders and finds `index.md` in any subdirectories. It will write the main navigation into `_data/navigation.yml` then parse the `index.md` files for headings (identified by a prepended `##`). Because indentation in YAML is denoted by spaces, these will also be written into `_data/navigation.yml`.

```python
#!/usr/bin/env python3

import os
import re

navigationYml = '_data/navigation.yml'
folders = ('guides',)
mainNav = """
main:
  - title: "Guides"
    url: /guides/
  - title: "Contact"
    url: /contact/
"""

navigationYmlF = open(navigationYml, 'w')
navigationYmlF.write('###### Autogenerated Navigation ######')
navigationYmlF.write('\n')
navigationYmlF.write(mainNav)
navigationYmlF.write('\n')

for folder in folders:
	for subFileOrFolder in os.listdir(folder):
		fullDir = folder + '/' + subFileOrFolder
		if os.path.isdir(fullDir):
			navName = subFileOrFolder + '-nav:'

			navigationYmlF.write(navName + '\n')
			navigationYmlF.write('  - title: "Jump to"\n')
			navigationYmlF.write('    children:\n')

			indexMdDir = fullDir + '/index.md'

			indexMdF = open(indexMdDir, 'r')
			for line in indexMdF:
				if line[:2] == '##':
					sectionTitle = line[3:-1]
					sectionLocationHash = re.sub(r'[^\w\s]', '', sectionTitle)
					sectionLocationHash = sectionLocationHash.lower()
					sectionLocationHash = sectionLocationHash.replace(' ', '-')

					navigationYmlF.write('      - title: "' + sectionTitle + '"\n')
					navigationYmlF.write('        url: "' + fullDir + '#' + sectionLocationHash + '"\n')
			navigationYmlF.write('\n')
```
